{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{useLanguage}from'../utils/LanguageContext';import{api}from'../services/api';import MetricCard from'./MetricCard';import PerformanceChart from'./PerformanceChart';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{const{district}=useParams();const[data,setData]=useState([]);const[stateAvg,setStateAvg]=useState(null);const[loading,setLoading]=useState(true);const{t,language,toggleLanguage,getDistrictName}=useLanguage();useEffect(()=>{loadData();},[district]);const loadData=async()=>{try{const[districtResponse,stateResponse]=await Promise.all([api.getDistrictData(district),api.getStateAverage()]);setData(districtResponse.data);setStateAvg(stateResponse.data);}catch(error){console.error('Failed to load data:',error);}finally{setLoading(false);}};const getPerformanceLevel=(value,avgValue)=>{if(!avgValue)return'average';const ratio=value/avgValue;if(ratio>=1.1)return'good';if(ratio<=0.9)return'poor';return'average';};if(loading){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"district-info\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[district,\" \\u0BAE\\u0BBE\\u0BB5\\u0B9F\\u0BCD\\u0B9F\\u0BAE\\u0BCD\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:t('loading')})})]});}const currentData=data[0]||{};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"breadcrumb\",children:\"\\u2190 Back to Home\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"district-info\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[getDistrictName(district),\" \",language==='ta'?'‡ÆÆ‡Ææ‡Æµ‡Æü‡Øç‡Æü‡ÆÆ‡Øç':'District']}),/*#__PURE__*/_jsx(\"p\",{children:new Date().toLocaleDateString(language==='ta'?'ta-IN':'en-IN')})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"language-toggle\",onClick:toggleLanguage,children:language==='en'?'‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç':'English'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"metric-cards\",children:[/*#__PURE__*/_jsx(MetricCard,{icon:\"\\uD83C\\uDFE0\",value:currentData.total_households_worked||0,label:t('jobsProvided'),level:getPerformanceLevel(currentData.total_households_worked,stateAvg===null||stateAvg===void 0?void 0:stateAvg.avg_households),metricType:\"jobsProvided\"}),/*#__PURE__*/_jsx(MetricCard,{icon:\"\\uD83D\\uDCC5\",value:parseFloat(currentData.avg_days_employment||0).toFixed(1),label:t('avgDays'),level:getPerformanceLevel(currentData.avg_days_employment,stateAvg===null||stateAvg===void 0?void 0:stateAvg.avg_days),metricType:\"avgDays\"}),/*#__PURE__*/_jsx(MetricCard,{icon:\"\\uD83D\\uDCB0\",value:\"\\u20B9\".concat((currentData.total_exp||0).toLocaleString('en-IN')),label:t('fundsDisburse'),level:getPerformanceLevel(currentData.total_exp,stateAvg===null||stateAvg===void 0?void 0:stateAvg.avg_funds),metricType:\"fundsDisburse\"}),/*#__PURE__*/_jsx(MetricCard,{icon:\"\\uD83D\\uDC65\",value:currentData.total_active_workers||0,label:t('beneficiaries'),level:getPerformanceLevel(currentData.total_active_workers,stateAvg===null||stateAvg===void 0?void 0:stateAvg.avg_workers),metricType:\"beneficiaries\"})]})}),/*#__PURE__*/_jsx(PerformanceChart,{data:data})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"gov-footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:t('footer')}),/*#__PURE__*/_jsx(\"p\",{children:t('copyright')})]})})})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useLanguage","api","MetricCard","PerformanceChart","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Dashboard","district","data","setData","stateAvg","setStateAvg","loading","setLoading","t","language","toggleLanguage","getDistrictName","loadData","districtResponse","stateResponse","Promise","all","getDistrictData","getStateAverage","error","console","getPerformanceLevel","value","avgValue","ratio","children","className","currentData","to","Date","toLocaleDateString","onClick","icon","total_households_worked","label","level","avg_households","metricType","parseFloat","avg_days_employment","toFixed","avg_days","concat","total_exp","toLocaleString","avg_funds","total_active_workers","avg_workers"],"sources":["C:/Users/veera/OneDrive/Desktop/Web App/client/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useLanguage } from '../utils/LanguageContext';\nimport { api } from '../services/api';\nimport MetricCard from './MetricCard';\nimport PerformanceChart from './PerformanceChart';\n\nconst Dashboard = () => {\n  const { district } = useParams();\n  const [data, setData] = useState([]);\n  const [stateAvg, setStateAvg] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const { t, language, toggleLanguage, getDistrictName } = useLanguage();\n\n  useEffect(() => {\n    loadData();\n  }, [district]);\n\n  const loadData = async () => {\n    try {\n      const [districtResponse, stateResponse] = await Promise.all([\n        api.getDistrictData(district),\n        api.getStateAverage()\n      ]);\n      \n      setData(districtResponse.data);\n      setStateAvg(stateResponse.data);\n    } catch (error) {\n      console.error('Failed to load data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getPerformanceLevel = (value, avgValue) => {\n    if (!avgValue) return 'average';\n    const ratio = value / avgValue;\n    if (ratio >= 1.1) return 'good';\n    if (ratio <= 0.9) return 'poor';\n    return 'average';\n  };\n\n  if (loading) {\n    return (\n      <>\n        <div className=\"dashboard-header\">\n          <div className=\"district-info\">\n            <h1>{district} ‡ÆÆ‡Ææ‡Æµ‡Æü‡Øç‡Æü‡ÆÆ‡Øç</h1>\n          </div>\n        </div>\n        <div className=\"container\">\n          <div className=\"loading\">{t('loading')}</div>\n        </div>\n      </>\n    );\n  }\n\n  const currentData = data[0] || {};\n\n  return (\n    <>\n      <div className=\"dashboard-header\">\n        <div>\n          <Link to=\"/\" className=\"breadcrumb\">\n            ‚Üê Back to Home\n          </Link>\n          <div className=\"district-info\">\n            <h1>{getDistrictName(district)} {language === 'ta' ? '‡ÆÆ‡Ææ‡Æµ‡Æü‡Øç‡Æü‡ÆÆ‡Øç' : 'District'}</h1>\n            <p>{new Date().toLocaleDateString(language === 'ta' ? 'ta-IN' : 'en-IN')}</p>\n          </div>\n        </div>\n        <button className=\"language-toggle\" onClick={toggleLanguage}>\n          {language === 'en' ? '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç' : 'English'}\n        </button>\n      </div>\n      \n      <div className=\"container\">\n        <div className=\"main-content\">\n          <div className=\"metric-cards\">\n            <MetricCard\n              icon=\"üè†\"\n              value={currentData.total_households_worked || 0}\n              label={t('jobsProvided')}\n              level={getPerformanceLevel(currentData.total_households_worked, stateAvg?.avg_households)}\n              metricType=\"jobsProvided\"\n            />\n            \n            <MetricCard\n              icon=\"üìÖ\"\n              value={parseFloat(currentData.avg_days_employment || 0).toFixed(1)}\n              label={t('avgDays')}\n              level={getPerformanceLevel(currentData.avg_days_employment, stateAvg?.avg_days)}\n              metricType=\"avgDays\"\n            />\n            \n            <MetricCard\n              icon=\"üí∞\"\n              value={`‚Çπ${(currentData.total_exp || 0).toLocaleString('en-IN')}`}\n              label={t('fundsDisburse')}\n              level={getPerformanceLevel(currentData.total_exp, stateAvg?.avg_funds)}\n              metricType=\"fundsDisburse\"\n            />\n            \n            <MetricCard\n              icon=\"üë•\"\n              value={currentData.total_active_workers || 0}\n              label={t('beneficiaries')}\n              level={getPerformanceLevel(currentData.total_active_workers, stateAvg?.avg_workers)}\n              metricType=\"beneficiaries\"\n            />\n          </div>\n        </div>\n        \n        <PerformanceChart data={data} />\n      </div>\n      \n      <footer className=\"gov-footer\">\n        <div className=\"container\">\n          <div className=\"footer-content\">\n            <p>{t('footer')}</p>\n            <p>{t('copyright')}</p>\n          </div>\n        </div>\n      </footer>\n    </>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}