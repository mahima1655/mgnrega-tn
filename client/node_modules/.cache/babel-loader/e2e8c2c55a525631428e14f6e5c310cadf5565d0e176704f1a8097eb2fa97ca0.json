{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useLanguage}from'../utils/LanguageContext';import{api,detectLocation}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const HomePage=()=>{const[districts,setDistricts]=useState([]);const[selectedDistrict,setSelectedDistrict]=useState('');const[loading,setLoading]=useState(true);const navigate=useNavigate();const{t,language,toggleLanguage,getDistrictName}=useLanguage();useEffect(()=>{loadDistricts();},[]);const loadDistricts=async()=>{try{const response=await api.getDistricts();setDistricts(response.data);}catch(error){console.error('Failed to load districts:',error);}finally{setLoading(false);}};const handleAutoDetect=async()=>{try{setLoading(true);const district=await detectLocation();if(district){setSelectedDistrict(district);}else{alert('Could not detect your district automatically. Please select from the dropdown.');}}catch(error){console.error('Location error:',error);if(error.message.includes('denied')){alert('Location access denied. Please enable location services and try again.');}else if(error.message.includes('unavailable')){alert('Location service unavailable. Please select your district manually.');}else{alert('Location detection failed. Please select your district from the dropdown.');}}finally{setLoading(false);}};const handleSubmit=()=>{if(selectedDistrict){navigate(\"/dashboard/\".concat(selectedDistrict));}};if(loading&&districts.length===0){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"gov-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"gov-logo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"emblem\",children:\"\\uD83C\\uDDEE\\uD83C\\uDDF3\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"gov-title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('title')}),/*#__PURE__*/_jsx(\"p\",{children:\"Government of Tamil Nadu\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:t('loading')})})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"gov-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"gov-logo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"emblem\",children:\"\\uD83C\\uDDEE\\uD83C\\uDDF3\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"gov-title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('title')}),/*#__PURE__*/_jsx(\"p\",{children:\"Government of Tamil Nadu\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"language-toggle\",onClick:toggleLanguage,children:language==='en'?'‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç':'English'})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:t('selectDistrict')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"district-selector\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:t('selectDistrict')}),/*#__PURE__*/_jsxs(\"select\",{className:\"district-dropdown\",value:selectedDistrict,onChange:e=>setSelectedDistrict(e.target.value),children:[/*#__PURE__*/_jsxs(\"option\",{value:\"\",children:[\"-- \",t('selectDistrict'),\" --\"]}),districts.map(district=>/*#__PURE__*/_jsx(\"option\",{value:district,children:getDistrictName(district)},district))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:handleAutoDetect,disabled:loading,children:[\"\\uD83D\\uDCCD \",t('autoDetect')]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleSubmit,disabled:!selectedDistrict||loading,children:loading?t('loading'):t('go')})]})]})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"gov-footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:t('footer')}),/*#__PURE__*/_jsx(\"p\",{children:t('copyright')})]})})})]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLanguage","api","detectLocation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HomePage","districts","setDistricts","selectedDistrict","setSelectedDistrict","loading","setLoading","navigate","t","language","toggleLanguage","getDistrictName","loadDistricts","response","getDistricts","data","error","console","handleAutoDetect","district","alert","message","includes","handleSubmit","concat","length","children","className","onClick","value","onChange","e","target","map","disabled"],"sources":["C:/Users/veera/OneDrive/Desktop/Web App/client/src/components/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useLanguage } from '../utils/LanguageContext';\nimport { api, detectLocation } from '../services/api';\n\n\nconst HomePage = () => {\n  const [districts, setDistricts] = useState([]);\n  const [selectedDistrict, setSelectedDistrict] = useState('');\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  const { t, language, toggleLanguage, getDistrictName } = useLanguage();\n\n  useEffect(() => {\n    loadDistricts();\n  }, []);\n\n  const loadDistricts = async () => {\n    try {\n      const response = await api.getDistricts();\n      setDistricts(response.data);\n    } catch (error) {\n      console.error('Failed to load districts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAutoDetect = async () => {\n    try {\n      setLoading(true);\n      const district = await detectLocation();\n      if (district) {\n        setSelectedDistrict(district);\n      } else {\n        alert('Could not detect your district automatically. Please select from the dropdown.');\n      }\n    } catch (error) {\n      console.error('Location error:', error);\n      if (error.message.includes('denied')) {\n        alert('Location access denied. Please enable location services and try again.');\n      } else if (error.message.includes('unavailable')) {\n        alert('Location service unavailable. Please select your district manually.');\n      } else {\n        alert('Location detection failed. Please select your district from the dropdown.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = () => {\n    if (selectedDistrict) {\n      navigate(`/dashboard/${selectedDistrict}`);\n    }\n  };\n\n  if (loading && districts.length === 0) {\n    return (\n      <>\n        <div className=\"gov-header\">\n          <div className=\"container\">\n            <div className=\"gov-logo\">\n              <div className=\"emblem\">üáÆüá≥</div>\n            </div>\n            <div className=\"gov-title\">\n              <h1>{t('title')}</h1>\n              <p>Government of Tamil Nadu</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"container\">\n          <div className=\"loading\">{t('loading')}</div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"gov-header\">\n        <div className=\"container\">\n          <div className=\"gov-logo\">\n            <div className=\"emblem\">üáÆüá≥</div>\n          </div>\n          <div className=\"gov-title\">\n            <h1>{t('title')}</h1>\n            <p>Government of Tamil Nadu</p>\n          </div>\n          <button className=\"language-toggle\" onClick={toggleLanguage}>\n            {language === 'en' ? '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç' : 'English'}\n          </button>\n        </div>\n      </div>\n      \n      <div className=\"container\">\n        <div className=\"main-content\">\n          <div className=\"section-header\">\n            <h2>{t('selectDistrict')}</h2>\n          </div>\n          \n          <div className=\"district-selector\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{t('selectDistrict')}</label>\n              <select \n                className=\"district-dropdown\"\n                value={selectedDistrict}\n                onChange={(e) => setSelectedDistrict(e.target.value)}\n              >\n                <option value=\"\">-- {t('selectDistrict')} --</option>\n                {districts.map(district => (\n                  <option key={district} value={district}>{getDistrictName(district)}</option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"button-group\">\n              <button \n                className=\"btn btn-secondary\"\n                onClick={handleAutoDetect}\n                disabled={loading}\n              >\n                üìç {t('autoDetect')}\n              </button>\n\n              <button \n                className=\"btn btn-primary\"\n                onClick={handleSubmit}\n                disabled={!selectedDistrict || loading}\n              >\n                {loading ? t('loading') : t('go')}\n              </button>\n            </div>\n            \n\n          </div>\n        </div>\n\n      </div>\n      \n      <footer className=\"gov-footer\">\n        <div className=\"container\">\n          <div className=\"footer-content\">\n            <p>{t('footer')}</p>\n            <p>{t('copyright')}</p>\n          </div>\n        </div>\n      </footer>\n    </>\n  );\n};\n\nexport default HomePage;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,KAAQ,0BAA0B,CACtD,OAASC,GAAG,CAAEC,cAAc,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAGtD,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACe,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAAmB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEkB,CAAC,CAAEC,QAAQ,CAAEC,cAAc,CAAEC,eAAgB,CAAC,CAAGpB,WAAW,CAAC,CAAC,CAEtEF,SAAS,CAAC,IAAM,CACduB,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAArB,GAAG,CAACsB,YAAY,CAAC,CAAC,CACzCZ,YAAY,CAACW,QAAQ,CAACE,IAAI,CAAC,CAC7B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CAAC,OAAS,CACRV,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAY,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACFZ,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAa,QAAQ,CAAG,KAAM,CAAA1B,cAAc,CAAC,CAAC,CACvC,GAAI0B,QAAQ,CAAE,CACZf,mBAAmB,CAACe,QAAQ,CAAC,CAC/B,CAAC,IAAM,CACLC,KAAK,CAAC,gFAAgF,CAAC,CACzF,CACF,CAAE,MAAOJ,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAAC,CACvC,GAAIA,KAAK,CAACK,OAAO,CAACC,QAAQ,CAAC,QAAQ,CAAC,CAAE,CACpCF,KAAK,CAAC,wEAAwE,CAAC,CACjF,CAAC,IAAM,IAAIJ,KAAK,CAACK,OAAO,CAACC,QAAQ,CAAC,aAAa,CAAC,CAAE,CAChDF,KAAK,CAAC,qEAAqE,CAAC,CAC9E,CAAC,IAAM,CACLA,KAAK,CAAC,2EAA2E,CAAC,CACpF,CACF,CAAC,OAAS,CACRd,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAiB,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAIpB,gBAAgB,CAAE,CACpBI,QAAQ,eAAAiB,MAAA,CAAerB,gBAAgB,CAAE,CAAC,CAC5C,CACF,CAAC,CAED,GAAIE,OAAO,EAAIJ,SAAS,CAACwB,MAAM,GAAK,CAAC,CAAE,CACrC,mBACE5B,KAAA,CAAAE,SAAA,EAAA2B,QAAA,eACE/B,IAAA,QAAKgC,SAAS,CAAC,YAAY,CAAAD,QAAA,cACzB7B,KAAA,QAAK8B,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB/B,IAAA,QAAKgC,SAAS,CAAC,UAAU,CAAAD,QAAA,cACvB/B,IAAA,QAAKgC,SAAS,CAAC,QAAQ,CAAAD,QAAA,CAAC,0BAAI,CAAK,CAAC,CAC/B,CAAC,cACN7B,KAAA,QAAK8B,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB/B,IAAA,OAAA+B,QAAA,CAAKlB,CAAC,CAAC,OAAO,CAAC,CAAK,CAAC,cACrBb,IAAA,MAAA+B,QAAA,CAAG,0BAAwB,CAAG,CAAC,EAC5B,CAAC,EACH,CAAC,CACH,CAAC,cACN/B,IAAA,QAAKgC,SAAS,CAAC,WAAW,CAAAD,QAAA,cACxB/B,IAAA,QAAKgC,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAElB,CAAC,CAAC,SAAS,CAAC,CAAM,CAAC,CAC1C,CAAC,EACN,CAAC,CAEP,CAEA,mBACEX,KAAA,CAAAE,SAAA,EAAA2B,QAAA,eACE/B,IAAA,QAAKgC,SAAS,CAAC,YAAY,CAAAD,QAAA,cACzB7B,KAAA,QAAK8B,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB/B,IAAA,QAAKgC,SAAS,CAAC,UAAU,CAAAD,QAAA,cACvB/B,IAAA,QAAKgC,SAAS,CAAC,QAAQ,CAAAD,QAAA,CAAC,0BAAI,CAAK,CAAC,CAC/B,CAAC,cACN7B,KAAA,QAAK8B,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB/B,IAAA,OAAA+B,QAAA,CAAKlB,CAAC,CAAC,OAAO,CAAC,CAAK,CAAC,cACrBb,IAAA,MAAA+B,QAAA,CAAG,0BAAwB,CAAG,CAAC,EAC5B,CAAC,cACN/B,IAAA,WAAQgC,SAAS,CAAC,iBAAiB,CAACC,OAAO,CAAElB,cAAe,CAAAgB,QAAA,CACzDjB,QAAQ,GAAK,IAAI,CAAG,OAAO,CAAG,SAAS,CAClC,CAAC,EACN,CAAC,CACH,CAAC,cAENd,IAAA,QAAKgC,SAAS,CAAC,WAAW,CAAAD,QAAA,cACxB7B,KAAA,QAAK8B,SAAS,CAAC,cAAc,CAAAD,QAAA,eAC3B/B,IAAA,QAAKgC,SAAS,CAAC,gBAAgB,CAAAD,QAAA,cAC7B/B,IAAA,OAAA+B,QAAA,CAAKlB,CAAC,CAAC,gBAAgB,CAAC,CAAK,CAAC,CAC3B,CAAC,cAENX,KAAA,QAAK8B,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChC7B,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAD,QAAA,eACzB/B,IAAA,UAAOgC,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAElB,CAAC,CAAC,gBAAgB,CAAC,CAAQ,CAAC,cAC3DX,KAAA,WACE8B,SAAS,CAAC,mBAAmB,CAC7BE,KAAK,CAAE1B,gBAAiB,CACxB2B,QAAQ,CAAGC,CAAC,EAAK3B,mBAAmB,CAAC2B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAAH,QAAA,eAErD7B,KAAA,WAAQgC,KAAK,CAAC,EAAE,CAAAH,QAAA,EAAC,KAAG,CAAClB,CAAC,CAAC,gBAAgB,CAAC,CAAC,KAAG,EAAQ,CAAC,CACpDP,SAAS,CAACgC,GAAG,CAACd,QAAQ,eACrBxB,IAAA,WAAuBkC,KAAK,CAAEV,QAAS,CAAAO,QAAA,CAAEf,eAAe,CAACQ,QAAQ,CAAC,EAArDA,QAA8D,CAC5E,CAAC,EACI,CAAC,EACN,CAAC,cAENtB,KAAA,QAAK8B,SAAS,CAAC,cAAc,CAAAD,QAAA,eAC3B7B,KAAA,WACE8B,SAAS,CAAC,mBAAmB,CAC7BC,OAAO,CAAEV,gBAAiB,CAC1BgB,QAAQ,CAAE7B,OAAQ,CAAAqB,QAAA,EACnB,eACI,CAAClB,CAAC,CAAC,YAAY,CAAC,EACb,CAAC,cAETb,IAAA,WACEgC,SAAS,CAAC,iBAAiB,CAC3BC,OAAO,CAAEL,YAAa,CACtBW,QAAQ,CAAE,CAAC/B,gBAAgB,EAAIE,OAAQ,CAAAqB,QAAA,CAEtCrB,OAAO,CAAGG,CAAC,CAAC,SAAS,CAAC,CAAGA,CAAC,CAAC,IAAI,CAAC,CAC3B,CAAC,EACN,CAAC,EAGH,CAAC,EACH,CAAC,CAEH,CAAC,cAENb,IAAA,WAAQgC,SAAS,CAAC,YAAY,CAAAD,QAAA,cAC5B/B,IAAA,QAAKgC,SAAS,CAAC,WAAW,CAAAD,QAAA,cACxB7B,KAAA,QAAK8B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC7B/B,IAAA,MAAA+B,QAAA,CAAIlB,CAAC,CAAC,QAAQ,CAAC,CAAI,CAAC,cACpBb,IAAA,MAAA+B,QAAA,CAAIlB,CAAC,CAAC,WAAW,CAAC,CAAI,CAAC,EACpB,CAAC,CACH,CAAC,CACA,CAAC,EACT,CAAC,CAEP,CAAC,CAED,cAAe,CAAAR,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}