{"ast":null,"code":"import axios from 'axios';\nconst API_BASE = '/api';\nexport const api = {\n  getDistricts: () => axios.get(`${API_BASE}/districts`),\n  getDistrictData: district => axios.get(`${API_BASE}/district/${district}`),\n  getStateAverage: () => axios.get(`${API_BASE}/state-average`),\n  refreshData: () => axios.post(`${API_BASE}/refresh-data`)\n};\nexport const detectLocation = () => {\n  return new Promise((resolve, reject) => {\n    if (!navigator.geolocation) {\n      reject(new Error('Geolocation not supported'));\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(async position => {\n      try {\n        // Use Nominatim for reverse geocoding (free alternative to Google Maps)\n        const response = await axios.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${position.coords.latitude}&lon=${position.coords.longitude}`);\n        const address = response.data.display_name;\n        // Simple district extraction for Tamil Nadu\n        const districts = await api.getDistricts();\n        const detectedDistrict = districts.data.find(district => address.toUpperCase().includes(district.toUpperCase()));\n        resolve(detectedDistrict || null);\n      } catch (error) {\n        reject(error);\n      }\n    }, error => reject(error), {\n      timeout: 10000\n    });\n  });\n};","map":{"version":3,"names":["axios","API_BASE","api","getDistricts","get","getDistrictData","district","getStateAverage","refreshData","post","detectLocation","Promise","resolve","reject","navigator","geolocation","Error","getCurrentPosition","position","response","coords","latitude","longitude","address","data","display_name","districts","detectedDistrict","find","toUpperCase","includes","error","timeout"],"sources":["C:/Users/veera/OneDrive/Desktop/Web App/client/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE = '/api';\n\nexport const api = {\n  getDistricts: () => axios.get(`${API_BASE}/districts`),\n  getDistrictData: (district) => axios.get(`${API_BASE}/district/${district}`),\n  getStateAverage: () => axios.get(`${API_BASE}/state-average`),\n  refreshData: () => axios.post(`${API_BASE}/refresh-data`)\n};\n\nexport const detectLocation = () => {\n  return new Promise((resolve, reject) => {\n    if (!navigator.geolocation) {\n      reject(new Error('Geolocation not supported'));\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      async (position) => {\n        try {\n          // Use Nominatim for reverse geocoding (free alternative to Google Maps)\n          const response = await axios.get(\n            `https://nominatim.openstreetmap.org/reverse?format=json&lat=${position.coords.latitude}&lon=${position.coords.longitude}`\n          );\n          \n          const address = response.data.display_name;\n          // Simple district extraction for Tamil Nadu\n          const districts = await api.getDistricts();\n          const detectedDistrict = districts.data.find(district => \n            address.toUpperCase().includes(district.toUpperCase())\n          );\n          \n          resolve(detectedDistrict || null);\n        } catch (error) {\n          reject(error);\n        }\n      },\n      (error) => reject(error),\n      { timeout: 10000 }\n    );\n  });\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAG,MAAM;AAEvB,OAAO,MAAMC,GAAG,GAAG;EACjBC,YAAY,EAAEA,CAAA,KAAMH,KAAK,CAACI,GAAG,CAAC,GAAGH,QAAQ,YAAY,CAAC;EACtDI,eAAe,EAAGC,QAAQ,IAAKN,KAAK,CAACI,GAAG,CAAC,GAAGH,QAAQ,aAAaK,QAAQ,EAAE,CAAC;EAC5EC,eAAe,EAAEA,CAAA,KAAMP,KAAK,CAACI,GAAG,CAAC,GAAGH,QAAQ,gBAAgB,CAAC;EAC7DO,WAAW,EAAEA,CAAA,KAAMR,KAAK,CAACS,IAAI,CAAC,GAAGR,QAAQ,eAAe;AAC1D,CAAC;AAED,OAAO,MAAMS,cAAc,GAAGA,CAAA,KAAM;EAClC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,IAAI,CAACC,SAAS,CAACC,WAAW,EAAE;MAC1BF,MAAM,CAAC,IAAIG,KAAK,CAAC,2BAA2B,CAAC,CAAC;MAC9C;IACF;IAEAF,SAAS,CAACC,WAAW,CAACE,kBAAkB,CACtC,MAAOC,QAAQ,IAAK;MAClB,IAAI;QACF;QACA,MAAMC,QAAQ,GAAG,MAAMnB,KAAK,CAACI,GAAG,CAC9B,+DAA+Dc,QAAQ,CAACE,MAAM,CAACC,QAAQ,QAAQH,QAAQ,CAACE,MAAM,CAACE,SAAS,EAC1H,CAAC;QAED,MAAMC,OAAO,GAAGJ,QAAQ,CAACK,IAAI,CAACC,YAAY;QAC1C;QACA,MAAMC,SAAS,GAAG,MAAMxB,GAAG,CAACC,YAAY,CAAC,CAAC;QAC1C,MAAMwB,gBAAgB,GAAGD,SAAS,CAACF,IAAI,CAACI,IAAI,CAACtB,QAAQ,IACnDiB,OAAO,CAACM,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACxB,QAAQ,CAACuB,WAAW,CAAC,CAAC,CACvD,CAAC;QAEDjB,OAAO,CAACe,gBAAgB,IAAI,IAAI,CAAC;MACnC,CAAC,CAAC,OAAOI,KAAK,EAAE;QACdlB,MAAM,CAACkB,KAAK,CAAC;MACf;IACF,CAAC,EACAA,KAAK,IAAKlB,MAAM,CAACkB,KAAK,CAAC,EACxB;MAAEC,OAAO,EAAE;IAAM,CACnB,CAAC;EACH,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}